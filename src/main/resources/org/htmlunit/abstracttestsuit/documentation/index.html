<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Test Documentation</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --success-color: #27ae60;
            --light-gray: #ecf0f1;
            --code-bg: #f8f9fa;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f6fa;
            line-height: 1.6;
        }

        .navbar {
            background-color: var(--primary-color);
            padding: 1rem;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .doc-grid {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .sidebar {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            height: fit-content;
            position: sticky;
            top: 2rem;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar li {
            margin: 0.5rem 0;
        }

        .sidebar a {
            color: var(--secondary-color);
            text-decoration: none;
            display: block;
            padding: 0.5rem;
            border-radius: 4px;
        }

        .sidebar a:hover {
            background: var(--light-gray);
        }

        .content-area {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .doc-section {
            margin-bottom: 3rem;
        }

        .doc-section h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--light-gray);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }

        code {
            background: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Consolas', monospace;
        }

        pre {
            background: var(--code-bg);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th,
        td {
            padding: 0.75rem;
            border: 1px solid var(--light-gray);
        }

        th {
            background: var(--light-gray);
        }

        .method-card {
            border: 1px solid var(--light-gray);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .method-header {
            font-weight: bold;
            color: var(--success-color);
            margin-bottom: 0.5rem;
        }
    </style>
</head>

<body>
    <div class="navbar">
        <a href="https://htmlunit.sourceforge.io/" style="text-decoration: none; color: white;">
            <img src="../images/htmlunit.png" alt="HTMLUnit Logo" style="height: 30px; vertical-align: middle; margin-right: 10px;">
        </a>
        <h1 style="display: inline; vertical-align: middle; font-size: 1.5rem;">Automated Test Recorder Documentation</h1>
    </div>

    <div class="container">
        <div class="doc-grid">
            <aside class="sidebar">
                <ul>
                    <li><a href="#overview">Overview</a></li>
                    <li><a href="#setup">Test Setup</a></li>
                    <li><a href="#annotations">Annotations</a></li>
                    <li><a href="#structure">Project Structure</a></li>
                    <li><a href="#examples">Code Examples</a></li>
                    <li><a href="#best-practices">Best Practices</a></li>
                </ul>
            </aside>

            <main class="content-area">
                <div id="overview" class="doc-section">
                    <h2>Overview</h2>
                    <p>This documentation describes the architecture and usage of the automated test recording system implemented using HTMLUnit and custom Java-based annotations. The core purpose of this framework is to provide an extensible and consistent mechanism to record snapshots, JavaScript outputs, and unit test results for regression analysis and documentation purposes.</p>
                </div>

                <div id="setup" class="doc-section">
                    <h2>Test Setup</h2>
                    <div class="method-card">
                        <div class="method-header">Basic Configuration</div>
                        <pre><code>@BeforeEach
void setUp() {
    // Setup HTMLUnit WebClient and Recorder Factory
    recorder = RecorderFactory.createForTestContext(this.getClass());
}</code></pre>
                    </div>
                </div>

                <div id="annotations" class="doc-section">
                    <h2>Custom Annotations</h2>
                    <ul>
                        <li><code>@RecordableTestClass</code> - Marks a test class for automatic recording.</li>
                        <li><code>@RecordTest</code> - Annotates a test method to enable recording during execution.</li>
                    </ul>
                    <p>These annotations are processed via reflection to trigger snapshot generation, script result logging, or test metadata recording.</p>
                </div>

                <div id="structure" class="doc-section">
                    <h2>Project Structure</h2>
                    <p>The recording system is split into two major packages:</p>
                    <pre><code></code></pre>
                    <p><code>record</code> contains POJO models representing different recording types, whereas <code>recorder</code> contains the logic to write and manage these records.</p>
                </div>

                <div id="examples" class="doc-section">
                    <h2>Code Examples</h2>
                    <pre><code>@RecordableTestClass
class HtmlSnapshotTests {

    @RecordTest
    @Test
    void shouldCaptureHomepageSnapshot() {
        HtmlPage page = webClient.getPage("http://localhost:8080/home");
        recorder.record(new HtmlSnapshotRecord("homepage.html", page.asXml()));
    }
}</code></pre>
                </div>

                <div id="best-practices" class="doc-section">
                    <h2>Best Practices</h2>
                    <ul>
                        <li>Always annotate test classes and methods properly to ensure recording triggers.</li>
                        <li>Store all recordings in a structured directory for traceability.</li>
                        <li>Use snapshot diffs in CI pipelines to detect unexpected changes.</li>
                        <li>Keep recorder logic minimal in test classes to ensure readability.</li>
                    </ul>
                </div>
            </main>
        </div>
    </div>

    <script>
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>

</html>
